<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GFAST: src/eewUtils/driveCMT.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pnsn_icon.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GFAST
   &#160;<span id="projectnumber">v0.01</span>
   </div>
   <div id="projectbrief">Fast geodetic computations for earthquake early warning</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('drive_c_m_t_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">driveCMT.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="gfast__eew_utils_8h_source.html">gfast_eewUtils.h</a>&quot;</code><br />
<code>#include &lt;lapacke.h&gt;</code><br />
<code>#include &lt;cblas.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="gfast__core_8h_source.html">gfast_core.h</a>&quot;</code><br />
<code>#include &quot;iscl/array/array.h&quot;</code><br />
<code>#include &quot;iscl/log/log.h&quot;</code><br />
<code>#include &quot;iscl/memory/memory.h&quot;</code><br />
</div>
<p><a href="drive_c_m_t_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4cc48c7145e40da9a8dfa975624a0724"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drive_c_m_t_8c.html#a4cc48c7145e40da9a8dfa975624a0724">eewUtils_driveCMT</a> (struct <a class="el" href="struct_g_f_a_s_t__cmt__props__struct.html">GFAST_cmt_props_struct</a> cmt_props, const double SA_lat, const double SA_lon, const double SA_dep, struct <a class="el" href="struct_g_f_a_s_t__offset_data__struct.html">GFAST_offsetData_struct</a> cmt_data, struct <a class="el" href="struct_g_f_a_s_t__cmt_results__struct.html">GFAST_cmtResults_struct</a> *cmt)</td></tr>
<tr class="memdesc:a4cc48c7145e40da9a8dfa975624a0724"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drives the CMT estimation.  <a href="#a4cc48c7145e40da9a8dfa975624a0724">More...</a><br /></td></tr>
<tr class="separator:a4cc48c7145e40da9a8dfa975624a0724"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4cc48c7145e40da9a8dfa975624a0724"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eewUtils_driveCMT </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_g_f_a_s_t__cmt__props__struct.html">GFAST_cmt_props_struct</a>&#160;</td>
          <td class="paramname"><em>cmt_props</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>SA_lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>SA_lon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>SA_dep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_g_f_a_s_t__offset_data__struct.html">GFAST_offsetData_struct</a>&#160;</td>
          <td class="paramname"><em>cmt_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_g_f_a_s_t__cmt_results__struct.html">GFAST_cmtResults_struct</a> *&#160;</td>
          <td class="paramname"><em>cmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drives the CMT estimation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmt_props</td><td>CMT inversion parameters </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SA_lat</td><td>event latitude (degrees) [-90,90] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SA_lon</td><td>event longitude (degrees) [0,360] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SA_dep</td><td>event depth (km) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmt_data</td><td>cmt offset data to invert</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cmt</td><td>on input contains the depths for the grid search on output contains the corresponding variance reduction, moment tensors, nodal planes at each depth in the CMT grid search, and optimal depth index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 indicates success 1 indicates an error on the cmt structure 2 indicates the offset data structure is invalid 3 indicates there was insufficient data to invert 4 indicates an error encountered during the computation</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Brendan Crowell (PNSN) and Ben Baker (ISTI) </dd></dl>

<p>Definition at line <a class="el" href="drive_c_m_t_8c_source.html#l00045">45</a> of file <a class="el" href="drive_c_m_t_8c_source.html">driveCMT.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drive_c_m_t_8c_a4cc48c7145e40da9a8dfa975624a0724_cgraph.png" border="0" usemap="#drive_c_m_t_8c_a4cc48c7145e40da9a8dfa975624a0724_cgraph" alt=""/></div>
<map name="drive_c_m_t_8c_a4cc48c7145e40da9a8dfa975624a0724_cgraph" id="drive_c_m_t_8c_a4cc48c7145e40da9a8dfa975624a0724_cgraph">
<area shape="rect" id="node2" href="ll2utm_8c.html#a0e58c8ec01533e2e03bbc7ef70439f32" title="This takes lat and lon values and converts to UTM northing and easting. " alt="" coords="211,144,367,171"/>
<area shape="rect" id="node3" href="grid_search_8c.html#a645048166eee4af0630a99c73bbb2ead" title="Performs the CMT depth grid search. " alt="" coords="217,195,362,221"/>
<area shape="rect" id="node10" href="decompose_moment_tensor_8c.html#aa9e01a88c160fc986602d4613019efb6" title="Finds the moment tensor decomposition of the NED moment tensor. " alt="" coords="191,267,388,309"/>
<area shape="rect" id="node4" href="depth_grid_search_8c.html#a5e96a6d4578c21f7bb65630998b70264" title="Performs the CMT depth grid search. " alt="" coords="457,148,637,175"/>
<area shape="rect" id="node5" href="cmt_2set_r_h_s_8c.html#a59ee002d8ce4013f422ebf659b3c3ec4" title="Sets the RHS for the moment tensor inversion. The right hand side for the i&#39;th site is packed ..." alt="" coords="743,5,873,32"/>
<area shape="rect" id="node6" href="cmt_2set_diagonal_weight_matrix_8c.html#a1d8a581b81d67fa5e9a14c21bcfca477" title="Sets the diagonal weight matrix in the inversion. " alt="" coords="711,57,905,98"/>
<area shape="rect" id="node7" href="cmt_2weight_observations_8c.html#a9b828a8432f31383314ee17f7294954f" title="Applies the diagonal data weight matrix to the observations. " alt="" coords="709,123,907,149"/>
<area shape="rect" id="node8" href="cmt_2set_forward_model_8c.html#a2df683935afb9b6bc308b56ee1e330aa" title="Computes matrix of Green&#39;s functions for the CMT inversion. If the deviatoric constraint is applied t..." alt="" coords="717,173,899,200"/>
<area shape="rect" id="node9" href="cmt_2weight_forward_model_8c.html#a740bfc040f807a20d9973493e575a455" title="Weights a forward modeling matrix by the diagonal data weights. " alt="" coords="707,224,909,251"/>
<area shape="rect" id="node11" href="cmopad_8c.html#ae9fa0569fb8fbbf71816d1680376bdef" title="Decomposes the input moment tensor Min in the North, East, Down coordinates into an isotropic..." alt="" coords="441,275,653,301"/>
<area shape="rect" id="node13" href="cmopad_8c.html#a1e15943c3bc19d926e75d06d03472576" title="cmopad_MT2PrincipalAxisSystem" alt="" coords="436,325,659,352"/>
<area shape="rect" id="node12" href="cmopad_8c.html#afd312a4bbf328a776c20d901239f21a2" title="Sorts eigenvalues/eigenvectors of a matrix into ascending order. Optionally, can sort based on the ab..." alt="" coords="709,275,907,301"/>
<area shape="rect" id="node14" href="cmopad_8c.html#a49e3758cf17c8bbafa912738f1b5f64a" title="Sets the two angle&#45;triples, describing the faultplanes of the Double Couple, defined by the eigenvect..." alt="" coords="725,325,891,352"/>
<area shape="rect" id="node15" href="cmopad_8c.html#a5f68c005203670f87d890464e62360a0" title="Returns dip, strike, and slip(rake) angles in degrees describing the fault plane. ..." alt="" coords="957,325,1139,352"/>
<area shape="rect" id="node16" href="cmopad_8c.html#a7d827c71f5bb152252464b4a0edeaf0c" title="Returns three Euler angles alpha, beta, and gamma (radians) from a rotation matrix. " alt="" coords="1187,325,1343,352"/>
<area shape="rect" id="node17" href="cmopad_8c.html#acc7e3331ef6112c001757c3ed0aa0e6e" title="Uniquify euler angle triplet. " alt="" coords="1391,325,1533,352"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f56652cd5384e00c3caafb03d62277d5.html">eewUtils</a></li><li class="navelem"><a class="el" href="drive_c_m_t_8c.html">driveCMT.c</a></li>
    <li class="footer">Generated on Wed Aug 2 2017 12:35:02 for GFAST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
