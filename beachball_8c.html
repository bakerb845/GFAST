<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GFAST: src/uw/beachball.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pnsn_icon.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GFAST
   &#160;<span id="projectnumber">v0.01</span>
   </div>
   <div id="projectbrief">Fast geodetic computations for earthquake early warning</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('beachball_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">beachball.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;float.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="gfast__config_8h_source.html">gfast_config.h</a>&quot;</code><br />
<code>#include &lt;cblas.h&gt;</code><br />
<code>#include &lt;lapacke.h&gt;</code><br />
<code>#include &lt;lapacke_utils.h&gt;</code><br />
<code>#include &lt;png.h&gt;</code><br />
<code>#include &quot;<a class="el" href="beachball_8h_source.html">beachball.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cmopad_8h_source.html">cmopad.h</a>&quot;</code><br />
</div>
<p><a href="beachball_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae71449b1cc6e6250b91f539153a7a0d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>&#160;&#160;&#160;3.14159265358979323846</td></tr>
<tr class="separator:ae71449b1cc6e6250b91f539153a7a0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a958e4508ed28ee5cc04249144312c15f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#a958e4508ed28ee5cc04249144312c15f">M_PI_2</a>&#160;&#160;&#160;1.57079632679489661923</td></tr>
<tr class="separator:a958e4508ed28ee5cc04249144312c15f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc3ee1a7f283f8ef65cea31f4436a95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(x,  y)&#160;&#160;&#160;(((x) &gt; (y)) ? (x) : (y))</td></tr>
<tr class="separator:aacc3ee1a7f283f8ef65cea31f4436a95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e75242132eaabbc1c512488a135926"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#a74e75242132eaabbc1c512488a135926">MIN</a>(x,  y)&#160;&#160;&#160;(((x) &lt; (y)) ? (x) : (y))</td></tr>
<tr class="separator:a74e75242132eaabbc1c512488a135926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a328742b602af65206e7a7f17d577003a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#a328742b602af65206e7a7f17d577003a">PIXMAP_COLORS</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a328742b602af65206e7a7f17d577003a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9dbfc6f1d8212299d3dd78fdf70766fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#a9dbfc6f1d8212299d3dd78fdf70766fb">beachball_setMomentTensor</a> (const double m11, const double m22, const double m33, const double m12, const double m13, const double m23, const enum <a class="el" href="cmopad_8h.html#a493c4b9712b7f16e63fa48923ac8e51f">cmopad_basis_enum</a> basis, struct <a class="el" href="structbeachball_plot__struct.html">beachballPlot_struct</a> *beachball)</td></tr>
<tr class="separator:a9dbfc6f1d8212299d3dd78fdf70766fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6b12ad0072637f30c4449c88757f76c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#af6b12ad0072637f30c4449c88757f76c">beachball_writePNG</a> (const char *fileName, size_t height, size_t width, unsigned char *bytes)</td></tr>
<tr class="separator:af6b12ad0072637f30c4449c88757f76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dad4077a4721003bfe4f652ec2d0609"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#a8dad4077a4721003bfe4f652ec2d0609">beachball_draw</a> (const char *fileName, struct <a class="el" href="structbeachball_plot__struct.html">beachballPlot_struct</a> beachball)</td></tr>
<tr class="separator:a8dad4077a4721003bfe4f652ec2d0609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1473891ec4d8ea3e50df08eef9d1d6b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#a1473891ec4d8ea3e50df08eef9d1d6b8">beachball_plotDefaults</a> (struct <a class="el" href="structbeachball_plot__struct.html">beachballPlot_struct</a> *beachball)</td></tr>
<tr class="separator:a1473891ec4d8ea3e50df08eef9d1d6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee0f6746393f5d6284fc925237f39703"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#aee0f6746393f5d6284fc925237f39703">cliffsNodes_plotStations</a> (const double xc, const double yc, const double rad, const int nstat, const double *__restrict__ az, const double *__restrict__ toa, double *__restrict__ xp, double *__restrict__ yp)</td></tr>
<tr class="memdesc:aee0f6746393f5d6284fc925237f39703"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the station locations for the given azimuth and take-off angle on a focal sphere with radius rad centered at (xc, yc). This is based on Cliff Frohlich's stnPlt but now processes multiple stations and does no plotting.  <a href="#aee0f6746393f5d6284fc925237f39703">More...</a><br /></td></tr>
<tr class="separator:aee0f6746393f5d6284fc925237f39703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a394f716524aaf5687a294a614b85a2d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#a394f716524aaf5687a294a614b85a2d8">cliffsNodes_mtensor</a> (const double taz, const double tdp, const double paz, const double pdp, const double tev1, const double bev1, const double pev1, double *__restrict__ mt, double *__restrict__ rm, double *__restrict__ rmt, double *ampMax)</td></tr>
<tr class="memdesc:a394f716524aaf5687a294a614b85a2d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the azimuth and dip of the tension and pressure eigenvectors in geographic coordinates along with normalized eigenvalues this computes the moment tensort in geographic coordinates as well as the rotation and transpose rotation matrices which rotate from a system where t=1-axis and p=2-axis. This is based on Cliff Frohlich's mtensor.  <a href="#a394f716524aaf5687a294a614b85a2d8">More...</a><br /></td></tr>
<tr class="separator:a394f716524aaf5687a294a614b85a2d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c2236111e9175c69d730131a8df4c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#ac7c2236111e9175c69d730131a8df4c9">cliffsNodes_beachBallP</a> (const double xc, const double yc, const double rad, const double taz1, const double tdp1, const double tevI, const double baz1, const double bdp1, const double bevI, const double paz1, const double pdp1, const double pevI, const int nNodalLine, const int nFocalSphere, const int nxPixel, const int nyPixel, const bool lwantNodalLines, const bool lwantPTBAxes, const bool lwantPolarity, struct <a class="el" href="structbeach_ball__struct.html">beachBall_struct</a> *beachBall)</td></tr>
<tr class="memdesc:ac7c2236111e9175c69d730131a8df4c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the lower-hemisphere projection `beachball' diagram for a focal mechanism. This is based on Cliff Frohlich's bballP and has been translated to C and does no plotting.  <a href="#ac7c2236111e9175c69d730131a8df4c9">More...</a><br /></td></tr>
<tr class="separator:ac7c2236111e9175c69d730131a8df4c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebc8325fc27dd441e210779f534d77e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="beachball_8c.html#acebc8325fc27dd441e210779f534d77e">cliffsNodes_free</a> (struct <a class="el" href="structbeach_ball__struct.html">beachBall_struct</a> *beachBall)</td></tr>
<tr class="separator:acebc8325fc27dd441e210779f534d77e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ae71449b1cc6e6250b91f539153a7a0d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define M_PI&#160;&#160;&#160;3.14159265358979323846</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00024">24</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<a class="anchor" id="a958e4508ed28ee5cc04249144312c15f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define M_PI_2&#160;&#160;&#160;1.57079632679489661923</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00027">27</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<a class="anchor" id="aacc3ee1a7f283f8ef65cea31f4436a95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((x) &gt; (y)) ? (x) : (y))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00030">30</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<a class="anchor" id="a74e75242132eaabbc1c512488a135926"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((x) &lt; (y)) ? (x) : (y))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00033">33</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<a class="anchor" id="a328742b602af65206e7a7f17d577003a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIXMAP_COLORS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00035">35</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8dad4077a4721003bfe4f652ec2d0609"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int beachball_draw </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbeachball_plot__struct.html">beachballPlot_struct</a>&#160;</td>
          <td class="paramname"><em>beachball</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00182">182</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="beachball_8c_a8dad4077a4721003bfe4f652ec2d0609_cgraph.png" border="0" usemap="#beachball_8c_a8dad4077a4721003bfe4f652ec2d0609_cgraph" alt=""/></div>
<map name="beachball_8c_a8dad4077a4721003bfe4f652ec2d0609_cgraph" id="beachball_8c_a8dad4077a4721003bfe4f652ec2d0609_cgraph">
<area shape="rect" id="node2" href="beachball_8c.html#ac7c2236111e9175c69d730131a8df4c9" title="Computes the lower&#45;hemisphere projection `beachball&#39; diagram for a focal mechanism. This is based on Cliff Frohlich&#39;s bballP and has been translated to C and does no plotting. " alt="" coords="165,5,327,32"/>
<area shape="rect" id="node4" href="beachball_8c.html#af6b12ad0072637f30c4449c88757f76c" title="beachball_writePNG" alt="" coords="175,56,317,83"/>
<area shape="rect" id="node5" href="beachball_8c.html#acebc8325fc27dd441e210779f534d77e" title="cliffsNodes_free" alt="" coords="187,107,305,133"/>
<area shape="rect" id="node3" href="beachball_8c.html#a394f716524aaf5687a294a614b85a2d8" title="Given the azimuth and dip of the tension and pressure eigenvectors in geographic coordinates along wi..." alt="" coords="375,5,517,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1473891ec4d8ea3e50df08eef9d1d6b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int beachball_plotDefaults </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbeachball_plot__struct.html">beachballPlot_struct</a> *&#160;</td>
          <td class="paramname"><em>beachball</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00385">385</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="beachball_8c_a1473891ec4d8ea3e50df08eef9d1d6b8_cgraph.png" border="0" usemap="#beachball_8c_a1473891ec4d8ea3e50df08eef9d1d6b8_cgraph" alt=""/></div>
<map name="beachball_8c_a1473891ec4d8ea3e50df08eef9d1d6b8_cgraph" id="beachball_8c_a1473891ec4d8ea3e50df08eef9d1d6b8_cgraph">
<area shape="rect" id="node2" href="beachball_8c.html#aee0f6746393f5d6284fc925237f39703" title="Computes the station locations for the given azimuth and take&#45;off angle on a focal sphere with radius..." alt="" coords="208,5,372,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9dbfc6f1d8212299d3dd78fdf70766fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int beachball_setMomentTensor </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>m11</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>m22</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>m33</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>m12</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>m13</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>m23</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const enum <a class="el" href="cmopad_8h.html#a493c4b9712b7f16e63fa48923ac8e51f">cmopad_basis_enum</a>&#160;</td>
          <td class="paramname"><em>basis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbeachball_plot__struct.html">beachballPlot_struct</a> *&#160;</td>
          <td class="paramname"><em>beachball</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00057">57</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="beachball_8c_a9dbfc6f1d8212299d3dd78fdf70766fb_cgraph.png" border="0" usemap="#beachball_8c_a9dbfc6f1d8212299d3dd78fdf70766fb_cgraph" alt=""/></div>
<map name="beachball_8c_a9dbfc6f1d8212299d3dd78fdf70766fb_cgraph" id="beachball_8c_a9dbfc6f1d8212299d3dd78fdf70766fb_cgraph">
<area shape="rect" id="node2" href="cmopad_8c.html#aa193d08b096c71d5b0a812e76eae1122" title="Transform a symmetric 3x3 matrix from in_sys to out_sys. " alt="" coords="517,5,747,32"/>
<area shape="rect" id="node4" href="cmopad_8c.html#ae9fa0569fb8fbbf71816d1680376bdef" title="Decomposes the input moment tensor Min in the North, East, Down coordinates into an isotropic..." alt="" coords="250,56,462,83"/>
<area shape="rect" id="node6" href="cmopad_8c.html#a1e15943c3bc19d926e75d06d03472576" title="cmopad_MT2PrincipalAxisSystem" alt="" coords="245,157,467,184"/>
<area shape="rect" id="node11" href="cmopad_8c.html#ac72abee829040dcace74a0e66bd13be3" title="Converts the unit eigenvector of length eig in coordinate system coord to length, azimuth..." alt="" coords="243,107,469,133"/>
<area shape="rect" id="node3" href="cmopad_8c.html#a257c97537728dae176069d8e0703a988" title="Generates basis for coordinate transform switch. " alt="" coords="804,56,967,83"/>
<area shape="rect" id="node5" href="cmopad_8c.html#afd312a4bbf328a776c20d901239f21a2" title="Sorts eigenvalues/eigenvectors of a matrix into ascending order. Optionally, can sort based on the ab..." alt="" coords="533,56,731,83"/>
<area shape="rect" id="node7" href="cmopad_8c.html#a49e3758cf17c8bbafa912738f1b5f64a" title="Sets the two angle&#45;triples, describing the faultplanes of the Double Couple, defined by the eigenvect..." alt="" coords="549,157,715,184"/>
<area shape="rect" id="node8" href="cmopad_8c.html#a5f68c005203670f87d890464e62360a0" title="Returns dip, strike, and slip(rake) angles in degrees describing the fault plane. ..." alt="" coords="795,157,976,184"/>
<area shape="rect" id="node9" href="cmopad_8c.html#a7d827c71f5bb152252464b4a0edeaf0c" title="Returns three Euler angles alpha, beta, and gamma (radians) from a rotation matrix. " alt="" coords="1024,157,1180,184"/>
<area shape="rect" id="node10" href="cmopad_8c.html#acc7e3331ef6112c001757c3ed0aa0e6e" title="Uniquify euler angle triplet. " alt="" coords="1228,157,1371,184"/>
<area shape="rect" id="node12" href="cmopad_8c.html#a04189e0a282492ca5c5e319acb4cc49a" title="Transforms a vector v from basis in_sys to basis out_sys. " alt="" coords="529,107,735,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af6b12ad0072637f30c4449c88757f76c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int beachball_writePNG </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00149">149</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac7c2236111e9175c69d730131a8df4c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cliffsNodes_beachBallP </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>yc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>rad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>taz1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>tdp1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>tevI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>baz1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>bdp1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>bevI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>paz1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>pdp1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>pevI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nNodalLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nFocalSphere</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nxPixel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nyPixel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>lwantNodalLines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>lwantPTBAxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>lwantPolarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbeach_ball__struct.html">beachBall_struct</a> *&#160;</td>
          <td class="paramname"><em>beachBall</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the lower-hemisphere projection `beachball' diagram for a focal mechanism. This is based on Cliff Frohlich's bballP and has been translated to C and does no plotting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xc</td><td>plot coordinates (e.g. pixels) of center of beachball </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">yc</td><td>plot coordinates (e.g. pixels) of center of beachball </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rad</td><td>beachball radius (e.g. pixels) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">taz1</td><td>azimuth (degrees) of tension eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tdp1</td><td>dip (degrees) of tension eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tevI</td><td>eigenvalue corresponding to tension eigenvector (e.g. Newton meters) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">baz1</td><td>azimuth (degrees) of null eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bdp1</td><td>dip (degrees) of null eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bevI</td><td>eigenvalue corresponding to null eigenvector (e.g. Newton meters) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">paz1</td><td>azimuth (degrees) of pressure eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pdp1</td><td>dip (degrees) of pressure eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pevI</td><td>eigenvalue corresponding to pressure eigenvector (e.g. Newton meters) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nNodalLine</td><td>number of points to draw in nodal line. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nFocalSphere</td><td>number of points to draw in focal sphere. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nxPixel</td><td>number of pixels in x when drawing polarity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nyPixel</td><td>number of pixels in y when drawing polairty </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lwantNodalLines</td><td>if true then compute the nodal lines. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lwantPTBAxes</td><td>if true then compute the PTB axis points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lwantPolarity</td><td>if true then compute the polarity.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">beachBall</td><td>container for the pressure, tension and null axes, the nodal lines, and the polarity</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Ben Baker</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>BSD</dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000012">Bug:</a></b></dt><dd>this routine fails if rad is not = 1.</dd></dl>

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00601">601</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="beachball_8c_ac7c2236111e9175c69d730131a8df4c9_cgraph.png" border="0" usemap="#beachball_8c_ac7c2236111e9175c69d730131a8df4c9_cgraph" alt=""/></div>
<map name="beachball_8c_ac7c2236111e9175c69d730131a8df4c9_cgraph" id="beachball_8c_ac7c2236111e9175c69d730131a8df4c9_cgraph">
<area shape="rect" id="node2" href="beachball_8c.html#a394f716524aaf5687a294a614b85a2d8" title="Given the azimuth and dip of the tension and pressure eigenvectors in geographic coordinates along wi..." alt="" coords="215,5,357,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acebc8325fc27dd441e210779f534d77e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cliffsNodes_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbeach_ball__struct.html">beachBall_struct</a> *&#160;</td>
          <td class="paramname"><em>beachBall</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00986">986</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<a class="anchor" id="a394f716524aaf5687a294a614b85a2d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cliffsNodes_mtensor </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>taz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>tdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>paz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>pdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>tev1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>bev1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>pev1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *__restrict__&#160;</td>
          <td class="paramname"><em>mt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *__restrict__&#160;</td>
          <td class="paramname"><em>rm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *__restrict__&#160;</td>
          <td class="paramname"><em>rmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>ampMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the azimuth and dip of the tension and pressure eigenvectors in geographic coordinates along with normalized eigenvalues this computes the moment tensort in geographic coordinates as well as the rotation and transpose rotation matrices which rotate from a system where t=1-axis and p=2-axis. This is based on Cliff Frohlich's mtensor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">taz</td><td>tension axis azimuth (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tdp</td><td>tension axis dip (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">paz</td><td>pressure axis azimuth (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pdp</td><td>pressure axis dip </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tev1</td><td>normalized eigenvalue for tension eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bev1</td><td>normalized eigenvalue for null eigenvector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pev1</td><td>normalized eigenvalue for pressure eigenvector</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mt</td><td>[3 x 3] moment tensor (column major) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rm</td><td>[3 x 3] rotation matrix as described above (column major) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rmt</td><td>[3 x 3] transpose rotation matrix described above (column major) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Ben Baker</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>BSD </dd></dl>

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00510">510</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
<a class="anchor" id="aee0f6746393f5d6284fc925237f39703"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cliffsNodes_plotStations </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>yc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>rad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nstat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *__restrict__&#160;</td>
          <td class="paramname"><em>az</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *__restrict__&#160;</td>
          <td class="paramname"><em>toa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *__restrict__&#160;</td>
          <td class="paramname"><em>xp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *__restrict__&#160;</td>
          <td class="paramname"><em>yp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the station locations for the given azimuth and take-off angle on a focal sphere with radius rad centered at (xc, yc). This is based on Cliff Frohlich's stnPlt but now processes multiple stations and does no plotting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xc</td><td>x center of focal sphere </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">yc</td><td>y center of focal sphere </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rad</td><td>radius of sphere </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nstat</td><td>number of stations </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">az</td><td>source station azimuths (degrees) [nstat] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">toa</td><td>take off angle (degrees) from source to stations [nstat]</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">xp</td><td>station's x location on focal sphere [nstat] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">yp</td><td>station's y location on focal sphere [nstat]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Ben Baker</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>BSD </dd></dl>

<p>Definition at line <a class="el" href="beachball_8c_source.html#l00441">441</a> of file <a class="el" href="beachball_8c_source.html">beachball.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c1c6716db148f6a3044f992f7b92cbeb.html">uw</a></li><li class="navelem"><a class="el" href="beachball_8c.html">beachball.c</a></li>
    <li class="footer">Generated on Wed Aug 2 2017 12:35:02 for GFAST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
